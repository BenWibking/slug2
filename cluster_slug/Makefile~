# Makefile for the c part of cluster_slug

# Did the user tell us to use a particular machine? If so, use that.
ifdef MACHINE
     include Make.mach.$(MACHINE)
else
     # Machine not specified, so try to guess
     UNAME              = $(shell uname)
     UNAMEN             = $(shell uname -n)

     # Do we have a makefile that matches the machine name? If so, use
     # that. If not, use a generic makefile depending on the OS.
     ifeq ($(UNAMEN), hyades.ucsc.edu)
          include Make.mach.ucsc-hyades
     else ifeq ($(UNAME), Linux)
          include Make.mach.linux-gnu
     else ifeq ($(UNAME), Darwin)
          include Make.mach.darwin
     else
          $(info Cannot detect system type. Suggest you specify MACHINE= manually.)
          include Make.mach.generic
     endif
endif

# Set compiler
CC		= $(MACH_CC)

# Set optimization mode flags
COPTFLAGS	= $(MACH_COPTFLAGS) -DNDEBUG -DHAVE_INLINE -MMD -MP
LDOPTFLAGS	= $(MACH_LDOPTFLAGS)

# Set debug mode flags
CDEBFLAGS     = $(MACH_CDEBFLAGS) -MMD -MP
LDDEBFLAGS	= $(MACH_LDDEBFLAGS)

# Include flags
ifdef C_INCLUDE_PATH
     INCFLAGS += -I$(C_INCLUDE_PATH)
endif
ifdef GSL_HDR_PATH
     INCFLAGS += -I$(GSL_HDR_PATH)
endif

# Read any user overrides
-include Make.config.override
